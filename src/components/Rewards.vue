<template>
    <div class="rewards-wrapper">
        <svg viewBox="0 0 805 510" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g id="rewards">
            <g id="Back ground" filter="url(#filter0_b_497_3286)">
            <path d="M747.206 472.566V394.238L757 384.447V81.4337L747.563 72H140.82L111.794 101.016V355.583L102 365.374V462.775L121.231 482H737.769L747.206 472.566Z" fill="url(#paint0_linear_497_3286)"/>
            <path d="M746.852 393.884L746.706 394.031V394.238V472.359L737.562 481.5H121.438L102.5 462.568V365.581L112.148 355.937L112.294 355.79V355.583V101.223L141.027 72.5H747.356L756.5 81.6409V384.24L746.852 393.884Z" stroke="url(#paint1_linear_497_3286)"/>
            </g>
            <text id="Rewards" fill="#CDCDCD" xml:space="preserve" style="white-space: pre" font-family="Anson" font-size="26" letter-spacing="0em"><tspan x="359.134" y="18.452">REWARDS</tspan></text>
            <path id="Vector" d="M334.631 3.00063C334.513 3.01243 334.402 3.0614 334.313 3.14025C334.225 3.21922 334.163 3.32419 334.138 3.44008L333.111 8.06185H339.399V3.00069H334.685V3.00057C334.668 2.99981 334.65 2.99981 334.632 3.00057L334.631 3.00063ZM340.524 3.00063V8.06178H343.476V3.00063H340.524ZM344.601 3.00063L344.601 8.06178H350.886L349.859 3.44002L349.858 3.43989C349.831 3.31534 349.761 3.20397 349.661 3.12412C349.562 3.04426 349.438 3.0007 349.31 3.00044L344.601 3.00063ZM333 9.18677V20.4354C333 20.5845 333.058 20.7278 333.163 20.8338C333.268 20.9396 333.411 20.9995 333.56 21H350.435C350.585 21.0006 350.729 20.9414 350.835 20.8353C350.941 20.7293 351.001 20.5853 351 20.4354V9.1868H344.602V12.7045C344.6 13.1317 344.142 13.4001 343.768 13.1934L341.998 12.2178L340.233 13.1934C339.859 13.4001 339.401 13.1317 339.4 12.7045V9.1868L333 9.18677ZM340.525 9.18677V11.7488L341.729 11.084C341.898 10.9905 342.103 10.9905 342.273 11.084L343.477 11.7488V9.18677H340.525ZM339.872 15.2829H344.125L344.125 15.2828C344.275 15.2823 344.419 15.3415 344.525 15.4476C344.631 15.5536 344.69 15.6976 344.69 15.8475V17.8481C344.69 17.9981 344.631 18.1419 344.525 18.248C344.419 18.354 344.275 18.4134 344.125 18.4128H339.872C339.722 18.4134 339.578 18.354 339.472 18.248C339.366 18.1421 339.307 17.998 339.307 17.8481V15.8475C339.307 15.6976 339.366 15.5536 339.472 15.4476C339.578 15.3415 339.722 15.2823 339.872 15.2828L339.872 15.2829ZM340.433 16.4079V17.2879H343.563V16.4079H340.433Z" fill="#CDCDCD"/>
            <g v-if="selectedItems.length === 0 || Object.keys($store.getters.rewards).length === 0" id="claim-btn" style="filter: grayscale(1); opacity: 0.7; cursor: not-allowed">
            <g id="Group 134">
            <path id="Rectangle 5" d="M604.25 431.25L710.75 431.25L710.75 461.566L705.768 466.75L611.104 466.75L604.25 459.896L604.25 431.25Z" fill="url(#paint2_linear_497_3286)" stroke="#FBC115" stroke-width="0.5"/>
            </g>
            <text id="Claim" fill="#FBC115" xml:space="preserve" style="white-space: pre" font-family="Anson" font-size="18" letter-spacing="0em"><tspan x="640.378" y="451.736">CLAIM</tspan></text>
            </g>
            <g v-else id="claim-btn" style="cursor: pointer" @click="claim">
                <g id="Group 134">
                <path id="Rectangle 5" d="M604.25 431.25L710.75 431.25L710.75 461.566L705.768 466.75L611.104 466.75L604.25 459.896L604.25 431.25Z" fill="url(#paint2_linear_497_3286)" stroke="#FBC115" stroke-width="0.5"/>
                </g>
                <text id="Claim" fill="#FBC115" xml:space="preserve" style="white-space: pre" font-family="Anson" font-size="18" letter-spacing="0em"><tspan x="640.378" y="451.736">{{ mmloader ? 'CLAIMING' : 'CLAIM' }}</tspan></text>
                <foreignObject x="605" y="429" height="50px" width="50px">
                <b-button class="loader-fake-btn" :loading="mmloader"></b-button>
                </foreignObject>
            </g>
            <text id="all rewards" fill="#CDCDCD" xml:space="preserve" style="white-space: pre" font-family="Anson" font-size="18" letter-spacing="0em"><tspan x="141" y="110.736">Ores</tspan></text>
            <g v-if="selectedItems.length !== Object.keys($store.getters.rewards).length" @click="selectAll" id="select all" style="filter: grayscale(1); opacity: 0.7; cursor: pointer">
            <text id="select all_2" fill="#FBC115" xml:space="preserve" style="white-space: pre" font-family="Anson" font-size="18" letter-spacing="0em"><tspan x="163.324" y="451.736">SELECT ALL</tspan></text>
            <rect id="Rectangle 6" x="137.25" y="441.25" width="14.5" height="14.5" stroke="#FBC115" stroke-width="0.5"/>
            <rect id="Rectangle 90" x="137" y="441" width="15" height="15" fill="#C4C4C4" fill-opacity="0.01"/>
            </g>
            <g v-else @click="unselectAll" id="select all" style="cursor:pointer">
            <text id="select all_2" fill="#FBC115" xml:space="preserve" style="white-space: pre" font-family="Anson" font-size="18" letter-spacing="0em"><tspan x="163.324" y="451.736">SELECT ALL</tspan></text>
            <rect id="Rectangle 6" x="137.25" y="441.25" width="14.5" height="14.5" stroke="#FBC115" fill="#FBC115" stroke-width="0.5"/>
            <rect id="Rectangle 90" x="137" y="441" width="15" height="15" fill="#C4C4C4" fill-opacity="0.01"/>
            </g>
            <g id="Ores">
            <g id="Group 135">
            <path id="Rectangle 5_2" d="M85.75 113.25L85.75 158.75L25.25 158.75L25.25 118.427L29.7802 113.25L85.75 113.25Z" fill="url(#paint3_linear_497_3286)" fill-opacity="0.1" stroke="#FBC115" stroke-width="0.5"/>
            </g>
            <g id="Ore icon">
            <path id="Vector_2" fill-rule="evenodd" clip-rule="evenodd" d="M56.5129 139.226L55.3606 136.662L47.6189 136.835L50.5371 140L56.5127 139.226L56.5129 139.226ZM47.5167 135.796L55.3737 135.622L60.4427 125.892L56.9509 123.792L50.5074 127.547L47.5168 135.796L47.5167 135.796ZM49.6504 126.845L55.4199 123.48L49.704 123.059L46 126.581L46.9432 134.32L49.6506 126.846L49.6504 126.845ZM56.9772 122.551L60.591 124.773L60.5022 119.418L53.2619 119.675L50.7219 122.087L51.3771 122.134C53.2445 122.268 55.1115 122.402 56.9772 122.551L56.9772 122.551ZM61.5669 120.884L61.6427 125.287L64.7573 126.024L61.5669 120.884ZM65.3276 127.23L61.4023 126.298L56.2706 136.15L57.4982 138.879L64.4064 135.291L65.3274 127.23H65.3276Z" fill="#FBC115"/>
            </g>
            <text id="Ores_2" fill="#FBC115" xml:space="preserve" style="white-space: pre" font-family="Anson" font-size="10" letter-spacing="0em"><tspan x="47.2139" y="150.02">Ores</tspan></text>
            </g>
            <g id="cards" style="filter: grayscale(1); opacity: 0.7; cursor: not-allowed">
            <g id="Group 136">
            <path id="Rectangle 5_3" d="M85.75 162.25L85.75 207.75L25.25 207.75L25.25 167.427L29.7802 162.25L85.75 162.25Z" fill="#C4C4C4" fill-opacity="0.01" stroke="#4E4E4E" stroke-width="0.5"/>
            </g>
            <text id="Cards" fill="#4E4E4E" xml:space="preserve" style="white-space: pre" font-family="Anson" font-size="10" letter-spacing="0em"><tspan x="45.3242" y="198.602">Cards</tspan></text>
            <g id="card icon">
            <path id="Vector_3" d="M66.4549 171.635L57.7792 170.264L57.9954 171.608L64.9681 172.715L64.9683 172.715C65.1953 172.75 65.399 172.874 65.5339 173.06C65.6688 173.246 65.7234 173.478 65.6858 173.705L63.5244 187.365C63.493 187.568 63.3899 187.754 63.2338 187.888C63.0775 188.022 62.8785 188.095 62.6728 188.096C62.6265 188.096 62.5802 188.091 62.5344 188.083L59.4049 187.59C59.2196 187.693 59.0178 187.764 58.8084 187.797L55.6182 188.303L63.6111 189.57H63.6109C63.8379 189.605 64.0699 189.549 64.2555 189.414C64.4412 189.278 64.5654 189.075 64.6009 188.848L67.173 172.624C67.2089 172.398 67.1535 172.166 67.0188 171.981C66.8843 171.795 66.6816 171.671 66.4553 171.634L66.4549 171.635Z" fill="#4E4E4E"/>
            <path id="Vector_4" d="M64.8335 173.566L62.6679 187.231L60.1045 186.824C60.2485 186.511 60.2967 186.162 60.2427 185.821L58.1375 172.507L64.8335 173.566Z" fill="#4E4E4E"/>
            <path id="Vector_5" d="M50.0699 179.116L52.1147 181.468L53.3321 178.599L51.2872 176.248L50.0699 179.116Z" fill="#4E4E4E"/>
            <path id="Vector_6" d="M59.3912 185.956C57.2227 172.308 56.9699 170.637 56.8192 169.732C56.7837 169.505 56.6594 169.302 56.4738 169.166C56.2881 169.031 56.0562 168.975 55.8292 169.011L44.7284 170.77C44.502 170.806 44.2994 170.931 44.1649 171.116C44.0302 171.302 43.9748 171.533 44.0107 171.76L46.5827 187.983C46.6182 188.21 46.7425 188.414 46.9281 188.549C47.1138 188.685 47.3457 188.741 47.5727 188.705C59.6092 186.797 57.1752 187.182 58.6736 186.946C58.8995 186.909 59.1018 186.784 59.2363 186.599C59.3706 186.413 59.4264 186.182 59.3913 185.956L59.3912 185.956ZM54.1817 178.811L52.7214 182.251C52.6459 182.43 52.4829 182.557 52.2908 182.587C52.2617 182.592 52.2322 182.594 52.2027 182.594C52.0402 182.594 51.8858 182.523 51.7796 182.4L49.3286 179.581V179.581C49.1675 179.394 49.1256 179.132 49.2205 178.904L50.6808 175.464C50.7567 175.286 50.9192 175.159 51.1108 175.129C51.3024 175.099 51.496 175.169 51.623 175.316L54.0735 178.134H54.0736C54.2348 178.321 54.2767 178.583 54.1817 178.811L54.1817 178.811Z" fill="#4E4E4E"/>
            </g>
            </g>
            <g id="Blueprints" style="filter: grayscale(1); opacity: 0.7; cursor: not-allowed">
            <g id="Group 137">
            <path id="Rectangle 5_4" d="M85.75 211.25L85.75 256.75L25.25 256.75L25.25 216.427L29.7802 211.25L85.75 211.25Z" fill="#C4C4C4" fill-opacity="0.01" stroke="#4E4E4E" stroke-width="0.5"/>
            </g>
            <text id="Blueprints_2" fill="#4E4E4E" xml:space="preserve" style="white-space: pre" font-family="Anson" font-size="10" letter-spacing="0em"><tspan x="36.4004" y="246.602">Blueprints</tspan></text>
            <g id="blueprints icon">
            <path id="Vector_7" d="M57.4982 233.371H58.6946L58.8506 232.903H57.3422L57.4982 233.371Z" fill="#4E4E4E"/>
            <path id="Vector_8" d="M55.29 232.435V230.137C55.2316 230.161 55.1787 230.196 55.1344 230.241C55.0901 230.286 55.0554 230.34 55.0324 230.399L54.0937 232.903H55.4685L55.5092 232.822C55.443 232.781 55.3881 232.724 55.3497 232.657C55.3113 232.589 55.2906 232.513 55.2895 232.435H55.29Z" fill="#4E4E4E"/>
            <path id="Vector_9" d="M60.9027 230.138V232.437C60.9018 232.514 60.8811 232.591 60.8427 232.658C60.8043 232.726 60.7494 232.783 60.683 232.823L60.7242 232.904H62.0985L61.1599 230.402C61.1368 230.343 61.1022 230.29 61.058 230.245C61.0138 230.2 60.961 230.164 60.9027 230.14V230.138Z" fill="#4E4E4E"/>
            <path id="Vector_10" d="M58.0964 224.016C57.92 224.016 57.3523 224.358 56.4644 225.657C56.3072 225.888 56.2239 226.161 56.2255 226.441V231.967H57.6287V229.161H58.5641V231.967H59.9673V226.441C59.969 226.161 59.8855 225.888 59.7278 225.657C58.84 224.358 58.2723 224.016 58.0964 224.016V224.016ZM58.8229 227.243L58.0964 226.877L57.37 227.241L56.9519 226.403L57.8874 225.935C57.9523 225.903 58.0239 225.886 58.0964 225.886C58.169 225.886 58.2405 225.903 58.3054 225.935L59.2409 226.403L58.8229 227.243Z" fill="#4E4E4E"/>
            <path id="Vector_11" d="M45 234.306C45.4045 234.002 45.8971 233.838 46.4032 233.838H47.8064V217H46.4032C46.0313 217.001 45.675 217.149 45.4121 217.412C45.1491 217.675 45.001 218.031 45 218.403V234.306Z" fill="#4E4E4E"/>
            <path id="Vector_12" d="M65.58 220.274V219.807H48.7418V234.306C48.7419 234.368 48.7298 234.428 48.7064 234.485C48.6829 234.542 48.6484 234.594 48.605 234.637C48.5615 234.681 48.5099 234.715 48.4532 234.738C48.3964 234.762 48.3355 234.774 48.2741 234.774H46.4032C46.031 234.774 45.6741 234.922 45.411 235.185C45.1478 235.448 45 235.805 45 236.177C45 236.549 45.1478 236.906 45.411 237.169C45.6741 237.432 46.031 237.58 46.4032 237.58H65.58V220.274ZM60.5708 221.343C60.66 221.257 60.7788 221.209 60.9027 221.208H61.8382V222.143H61.0946L60.2992 222.945L59.6353 222.281L60.5708 221.343ZM53.4191 221.21H54.8223C54.9462 221.211 55.065 221.26 55.1542 221.346L56.0897 222.281L55.4236 222.945L54.6288 222.144H53.4191V221.21ZM52.4836 231.5H49.6773V230.564H52.4836V231.5ZM52.4836 229.629H49.6773V228.693H52.4836V229.629ZM52.4836 224.016H49.6773V223.081H52.4836V224.016ZM52.4836 222.145H49.6773V221.21H52.4836V222.145ZM62.8672 233.438C62.7814 233.562 62.6667 233.663 62.5331 233.733C62.3995 233.803 62.2509 233.84 62.1001 233.84H60.435C60.3485 233.84 60.2636 233.816 60.19 233.771C60.1164 233.725 60.057 233.66 60.0186 233.582L59.7706 233.096L59.476 233.989C59.444 234.082 59.384 234.162 59.3045 234.219C59.2249 234.276 59.1297 234.307 59.0318 234.307H57.1609C57.0631 234.307 56.9678 234.276 56.8883 234.219C56.8087 234.162 56.7488 234.082 56.7167 233.989L56.4174 233.096L56.1741 233.582C56.1363 233.66 56.077 233.726 56.0033 233.771C55.9296 233.817 55.8444 233.841 55.7577 233.84H54.0926C53.9417 233.839 53.7932 233.802 53.6596 233.732C53.526 233.662 53.4114 233.561 53.3255 233.437C53.2396 233.313 53.1849 233.17 53.1662 233.02C53.1475 232.87 53.1653 232.718 53.2181 232.577L54.1584 230.075C54.247 229.836 54.3993 229.626 54.5988 229.468C54.7983 229.309 55.0373 229.208 55.29 229.176V226.439C55.2889 225.972 55.429 225.516 55.692 225.13C57.0952 223.081 57.8483 223.081 58.0974 223.081C58.3465 223.081 59.0986 223.081 60.5029 225.13C60.7659 225.516 60.906 225.972 60.9049 226.439V229.175C61.1576 229.207 61.3967 229.308 61.5962 229.467C61.7958 229.625 61.9482 229.835 62.037 230.074L62.9768 232.576C63.0293 232.718 63.0468 232.87 63.0277 233.02C63.0086 233.17 62.9536 233.313 62.8672 233.438V233.438ZM64.6445 224.016H62.7736V223.081H64.6445V224.016ZM64.6445 222.145H62.7736V221.21H64.6445V222.145Z" fill="#4E4E4E"/>
            </g>
            </g>
            <g id="box frame">
            <g id="Group 139">
            <path id="Vector_13" d="M795 435.78L784.731 425.519V154V73V60.0044L784.543 59.8111L773.892 49.1797H42.3957L42.2022 49.3679L10.6209 80.891V355.944L10.809 356.137L21.0783 366.387V448.395C21.2117 448.376 21.3462 448.366 21.4809 448.364C21.7889 448.363 22.0948 448.414 22.3855 448.515V365.865L22.1971 365.671L11.9281 355.421V81.4131L42.9186 50.4647H773.369L783.445 60.5266V71.5V156V426.041L783.638 426.235L793.902 436.485V498.622L783.826 508.684H42.9186L22.3855 488.179V482.675C22.021 482.847 21.6225 482.934 21.2195 482.931H21.0783V488.732L21.2665 488.925L42.3748 510H784.328L784.522 509.812L795.167 499.175V435.962L795 435.78Z" fill="url(#paint4_linear_497_3286)"/>
            <path id="Vector_14" d="M85.6527 508.611H86.4422V81.3887L117.584 50.2886H180.162V49.5054H117.255L117.145 49.6202L85.6527 81.0597V508.611Z" fill="url(#paint5_linear_497_3286)"/>
            <path id="Vector_15" d="M783.8 433.91L783.685 433.795V430.078L792.198 438.578L792.313 438.693V442.411L783.8 433.91ZM784.47 431.967V433.472L791.528 440.521V439.017L784.47 431.967Z" fill="url(#paint6_linear_497_3286)"/>
            <path id="Vector_16" d="M783.8 439.132L783.685 439.017V435.299L792.198 443.8L792.313 443.915V447.632L783.8 439.132ZM784.47 437.189V438.693L791.528 445.743V444.238L784.47 437.189Z" fill="url(#paint7_linear_497_3286)"/>
            <path id="Vector_17" d="M783.8 444.354L783.685 444.238V440.521L792.198 449.021L792.313 449.137V452.854L783.8 444.354ZM784.47 442.411V443.915L791.528 450.964V449.46L784.47 442.411Z" fill="url(#paint8_linear_497_3286)"/>
            <path id="Vector_18" d="M783.8 449.575L783.685 449.46V445.743L792.198 454.243L792.313 454.358V458.076L783.8 449.575ZM784.47 447.632V449.137L791.528 456.186V454.682L784.47 447.632Z" fill="url(#paint9_linear_497_3286)"/>
            <path id="Vector_19" d="M783.8 454.797L783.685 454.682V450.964L792.198 459.465L792.313 459.58V463.297L783.8 454.797ZM784.47 452.854V454.358L791.528 461.408V459.903L784.47 452.854Z" fill="url(#paint10_linear_497_3286)"/>
            <path id="Vector_20" d="M783.8 460.019L783.685 459.903V456.186L792.198 464.687L792.313 464.802V468.519L783.8 460.019ZM784.47 458.076V459.58L791.528 466.629V465.125L784.47 458.076Z" fill="url(#paint11_linear_497_3286)"/>
            <path id="Vector_21" d="M783.8 465.24L783.685 465.125V461.408L792.198 469.908L792.313 470.023V473.741L783.8 465.24ZM784.47 463.298V464.802L791.528 471.851V470.347L784.47 463.298Z" fill="url(#paint12_linear_497_3286)"/>
            <path id="Vector_22" d="M783.8 470.462L783.685 470.347V466.629L792.198 475.13L792.313 475.245V478.962L783.8 470.462ZM784.47 468.519V470.023L791.528 477.073V475.568L784.47 468.519Z" fill="url(#paint13_linear_497_3286)"/>
            <path id="Vector_23" d="M783.8 475.684L783.685 475.568V471.851L792.198 480.352L792.313 480.467V484.184L783.8 475.684ZM784.47 473.741V475.245L791.528 482.294V480.79L784.47 473.741Z" fill="url(#paint14_linear_497_3286)"/>
            <path id="Vector_24" d="M783.8 480.905L783.685 480.79V477.073L792.198 485.573L792.313 485.688V489.406L783.8 480.905ZM784.47 478.963V480.467L791.528 487.516V486.012L784.47 478.963Z" fill="url(#paint15_linear_497_3286)"/>
            <path id="Vector_25" d="M783.8 486.127L783.685 486.011V482.294L792.198 490.794L792.313 490.91V494.627L783.8 486.127ZM784.47 484.184V485.688L791.528 492.737V491.233L784.47 484.184Z" fill="url(#paint16_linear_497_3286)"/>
            <path id="Vector_26" d="M757.542 504.288V498.743L768.114 488.184L768.229 488.069H781.641L789.599 496.017L789.714 496.132V499.066L781.756 507.014L781.641 507.128H760.402L757.542 504.288ZM788.914 498.743V496.455L781.301 488.853H768.569L758.342 499.066V503.964L760.726 506.345H781.317L788.914 498.743Z" fill="url(#paint17_linear_497_3286)"/>
            <path id="Vector_27" d="M8.26788 125.557H9.05219V104.832L14.2861 99.6103V83.9453L45.4283 52.8453H63.5615V52.062H45.0989L44.9891 52.1769L13.4966 83.6164V99.2813L8.26788 104.503V125.557Z" fill="#616161"/>
            <path id="Vector_28" d="M741.333 54.4121H739.503V56.2397H741.333V54.4121Z" fill="#FBC115"/>
            <path id="Vector_29" d="M736.104 54.4121H734.274V56.2397H736.104V54.4121Z" fill="#FBC115"/>
            <path id="Vector_30" d="M730.875 54.4121H729.045V56.2397H730.875V54.4121Z" fill="#FBC115"/>
            <path id="Vector_31" d="M725.647 54.4121H723.817V56.2397H725.647V54.4121Z" fill="#FBC115"/>
            <path id="Vector_32" d="M720.418 54.4121H718.588V56.2397H720.418V54.4121Z" fill="#FBC115"/>
            <path id="Vector_33" d="M778.101 68.5011H768.286L743.789 47H685V51.9029H738.899L763.401 73.3997V102.799L757.502 107.698V142H763.401L783 112.6V73.404L778.101 68.5011ZM778.101 115.047L763.401 134.65V132.198L778.101 112.6V115.047ZM775.65 78.298C775.165 78.298 774.691 78.1541 774.287 77.8846C773.884 77.615 773.57 77.2321 773.384 76.784C773.199 76.3358 773.151 75.8423 773.246 75.3667C773.341 74.891 773.575 74.4542 773.918 74.1116C774.261 73.7689 774.698 73.5359 775.174 73.4418C775.65 73.3477 776.143 73.3969 776.591 73.5831C777.039 73.7693 777.421 74.0844 777.69 74.4881C777.959 74.8918 778.102 75.366 778.101 75.851C778.101 76.1727 778.038 76.4915 777.915 76.7886C777.791 77.0858 777.611 77.3555 777.383 77.5828C777.155 77.8101 776.885 77.9902 776.588 78.1129C776.29 78.2357 775.971 78.2986 775.65 78.298Z" fill="url(#paint18_linear_497_3286)"/>
            <path id="Vector_34" d="M47.9379 387.352L36.3513 378.272C35.6168 377.698 34.7114 377.385 33.7788 377.384H26.4586C25.477 377.386 24.5265 377.04 23.7761 376.408L22.2075 375.092C22.1257 375.017 22.0284 374.963 21.9226 374.931C21.8167 374.899 21.7049 374.892 21.5958 374.909C21.4309 374.938 21.2817 375.024 21.1737 375.152C21.0658 375.28 21.0061 375.441 21.005 375.609V447.972C20.2748 447.88 19.5397 447.833 18.8037 447.831C18.5161 447.831 18.2338 447.831 17.9515 447.831V438.258C17.9632 437.22 17.5762 436.216 16.8703 435.454C16.1643 434.692 15.1927 434.228 14.1553 434.159C13.6155 434.133 13.0764 434.218 12.5701 434.407C12.0639 434.595 11.6011 434.885 11.2101 435.257C10.819 435.63 10.5078 436.077 10.2951 436.573C10.0823 437.069 9.97246 437.603 9.97235 438.143V450.17C7.69246 451.468 5.72782 453.252 4.21873 455.396C2.70964 457.54 1.69352 459.99 1.24286 462.572C0.792208 465.153 0.918104 467.802 1.61178 470.33C2.30546 472.857 3.54975 475.2 5.25554 477.191C6.96133 479.183 9.0864 480.773 11.4792 481.849C13.872 482.925 16.4734 483.459 19.0971 483.414C21.7208 483.37 24.3022 482.747 26.6567 481.59C29.0113 480.433 31.0806 478.771 32.7172 476.722L41.6374 484.221C41.7666 484.328 41.9293 484.387 42.0975 484.388C42.248 484.389 42.3951 484.342 42.5159 484.252C42.6111 484.182 42.6877 484.089 42.7396 483.983C42.7915 483.877 42.817 483.759 42.8139 483.641V423.862C42.8107 423.087 42.9611 422.319 43.2563 421.602C43.5516 420.885 43.9858 420.233 44.5342 419.685L48.5394 415.69C49.1769 415.05 49.5341 414.185 49.5328 413.283V390.616C49.5282 389.987 49.3825 389.368 49.1065 388.803C48.8305 388.238 48.4311 387.742 47.9379 387.352ZM23.567 378.475L41.3969 393.096V461.679C41.3974 462.182 41.2502 462.673 40.9734 463.093C40.6966 463.513 40.3024 463.843 39.8398 464.041C39.3772 464.24 38.8666 464.299 38.371 464.21C37.8754 464.121 37.4167 463.89 37.0518 463.543C36.6663 463.178 36.4048 462.701 36.304 462.18C35.6224 458.748 33.9456 455.591 31.482 453.103C29.0185 450.615 25.8769 448.906 22.448 448.186L23.567 378.475ZM18.8193 481.991C15.5762 481.991 12.4061 481.031 9.70964 479.231C7.01313 477.432 4.9114 474.875 3.67033 471.882C2.42926 468.89 2.10449 465.598 2.73718 462.421C3.36987 459.245 4.93153 456.327 7.22473 454.037C9.51792 451.747 12.4398 450.187 15.6205 449.555C18.8013 448.923 22.098 449.248 25.0942 450.487C28.0904 451.727 30.6515 453.826 32.4532 456.518C34.255 459.211 35.2167 462.377 35.2167 465.616C35.2125 469.958 33.4834 474.12 30.4092 477.19C27.3351 480.26 23.1668 481.987 18.8193 481.991Z" fill="url(#paint19_linear_497_3286)"/>
            <path id="Vector_35" d="M26.8089 399.199L26.6624 399.057V394.384L37.3657 405.073L37.5119 405.214V409.887L26.8089 399.199ZM27.6507 396.76V398.65L36.5395 407.527V405.6L27.6507 396.76Z" fill="#FBC115"/>
            <path id="Vector_36" d="M26.8089 407.727L26.6624 407.586V402.887L37.3657 413.575L37.5119 413.717V418.416L26.8089 407.727ZM27.6507 405.288V407.179L36.5395 416.056V414.165L27.6507 405.288Z" fill="#FBC115"/>
            <path id="Vector_37" d="M26.8089 416.256L26.6624 416.115V411.416L37.3657 422.105L37.5119 422.245V426.945L26.8089 416.256ZM27.6507 413.818V415.708L36.5395 424.585V422.689L27.6507 413.818Z" fill="#FBC115"/>
            <path id="Vector_38" d="M26.8089 424.785L26.6624 424.644V419.945L37.3657 430.633L37.5119 430.775V435.442L26.8089 424.785ZM27.6507 422.341V424.237L36.5395 433.114V431.223L27.6507 422.341Z" fill="#FBC115"/>
            <path id="Vector_39" d="M26.8089 433.257L26.6624 433.116V428.442L37.3657 439.131L37.5119 439.272V443.945L26.8089 433.257ZM27.6507 430.813V432.708L36.5395 441.585V439.695L27.6507 430.813Z" fill="#FBC115"/>
            <path id="Vector_40" d="M26.8089 441.76L26.6624 441.619V436.945L37.3657 447.634L37.5119 447.775V452.475L26.8089 441.76ZM27.6507 439.316V441.211L36.5395 450.088V448.198L27.6507 439.316Z" fill="#FBC115"/>
            </g>
            <g id="Group 285">
            <path id="Vector_41" d="M800.058 500.203L800.058 286.278L799.371 286.278L799.371 499.937L795.805 503.341L789 503.341L789 504L796.099 504L800.058 500.203Z" fill="#353739"/>
            <path id="Vector_42" d="M798.602 350.116L798.602 306.501L800.892 306.501L800.892 350.116L798.602 350.116Z" fill="#353739"/>
            <path id="Vector_43" d="M798.602 355.92L798.602 354.132L800.892 354.132L800.892 355.92L798.602 355.92Z" fill="#353739"/>
            <path id="Vector_44" d="M791.699 288.13L791.699 286.278L796.312 286.278L796.312 289.855L793.499 289.855L791.699 288.13Z" fill="#353739"/>
            <path id="Vector_45" d="M791.699 325.029L791.699 323.178L796.312 323.178L796.312 326.755L793.499 326.755L791.699 325.029Z" fill="#353739"/>
            <path id="Vector_46" d="M791.699 361.914L791.699 360.062L796.312 360.063L796.312 363.64L793.499 363.64L791.699 361.914Z" fill="#353739"/>
            <g id="Group" opacity="0.38">
            <path id="Vector_47" opacity="0.38" d="M791.699 226.316L796.312 221.892L799.764 221.892L799.764 282.027L791.699 282.027L791.699 226.316Z" fill="#353739"/>
            </g>
            <path id="Vector_48" d="M799.469 220.119L799.469 183.172L794.415 183.172L789.164 188.208L789.655 188.679L794.693 183.831L798.782 183.831L798.782 219.476L795.233 219.476L789.655 224.81L789.655 233.815L790.342 233.815L790.342 225.092L795.511 220.119L799.469 220.119Z" fill="#353739"/>
            <path id="Vector_49" d="M799.469 180.238L799.469 53.1244L795.347 49.1865L773.687 49.4998L773 49.4998L794.66 49.4532L798.782 53.3911L798.782 179.579L793.728 179.579L789.164 183.956L789.655 184.427L794.006 180.238L799.469 180.238Z" fill="#353739"/>
            <path id="Vector_50" d="M797.686 177.885L797.686 161.804L795.38 161.804L795.38 177.885L797.686 177.885ZM796.999 162.463L796.999 177.304L796.067 177.304L796.067 162.525L796.999 162.463Z" fill="#353739"/>
            <path id="Vector_51" d="M792.714 188.098L795.02 185.886L797.49 185.886L797.49 188.098L792.714 188.098Z" fill="#353739"/>
            <path id="Vector_52" d="M800.925 225.924L800.925 195.472L801.661 195.472L801.661 225.924L800.925 225.924Z" fill="#353739"/>
            <path id="Vector_53" d="M803.199 221.265L803.199 215.052L804.017 215.052L804.017 221.265L803.199 221.265Z" fill="#353739"/>
            <path id="Vector_54" d="M803.199 224.387L803.199 222.755L804.017 222.755L804.017 224.387L803.199 224.387Z" fill="#353739"/>
            <path id="Vector_55" d="M794.267 142.287L794.267 137L795.674 137L795.674 142.287L794.267 142.287Z" fill="#353739"/>
            <path id="Vector_56" d="M799.878 153.034L797.997 151.245L797.997 148.139L796.279 148.139L796.279 151.92L798.651 154.21L799.878 153.034Z" fill="#353739"/>
            </g>
            <g id="Group 286">
            <path id="Vector_57" d="M750.211 442.602L750.211 422.384L756.918 422.384C758.254 422.384 759.535 422.917 760.48 423.865C761.425 424.814 761.956 426.101 761.956 427.442L761.956 437.544C761.956 438.885 761.425 440.172 760.48 441.12C759.535 442.069 758.254 442.602 756.918 442.602L750.211 442.602ZM751.067 423.318L751.067 441.816L756.977 441.816C758.086 441.816 759.149 441.373 759.933 440.586C760.717 439.799 761.158 438.731 761.158 437.618L761.158 427.516C761.174 426.95 761.076 426.386 760.869 425.859C760.662 425.332 760.352 424.853 759.955 424.449C759.559 424.046 759.086 423.728 758.564 423.513C758.042 423.298 757.482 423.191 756.918 423.2L751.067 423.318Z" fill="#26292C"/>
            <path id="Vector_58" d="M750.211 464.985L750.211 444.916L756.534 444.916L756.534 459.067C756.534 460.64 755.911 462.149 754.803 463.262C753.695 464.375 752.191 465 750.624 465L750.211 464.985ZM751.067 445.702L751.067 464.036C752.324 463.925 753.494 463.346 754.347 462.412C755.2 461.479 755.674 460.259 755.677 458.992L755.677 445.642L751.067 445.702Z" fill="#26292C"/>
            <path id="Vector_59" d="M750.21 420.07L750.21 400L750.639 400C752.206 400 753.709 400.625 754.818 401.738C755.926 402.851 756.548 404.36 756.548 405.933L756.548 420.084L750.21 420.07ZM751.008 400.949L751.008 419.283L755.618 419.283L755.618 405.933C755.601 404.677 755.12 403.472 754.268 402.551C753.417 401.63 752.255 401.059 751.008 400.949V400.949Z" fill="#26292C"/>
            <path id="Vector_60" d="M753.978 417.562L753.978 409.656L752.678 409.656L752.678 417.562L753.978 417.562Z" fill="#26292C"/>
            <path id="Vector_61" d="M753.978 455.477L753.978 447.571L752.678 447.571L752.678 455.477L753.978 455.477Z" fill="#26292C"/>
            <path id="Vector_62" d="M754.022 436.446L754.022 428.54L752.722 428.54L752.722 436.446L754.022 436.446Z" fill="#26292C"/>
            <path id="Vector_63" d="M756.105 436.446L756.105 428.54L754.805 428.54L754.805 436.446L756.105 436.446Z" fill="#26292C"/>
            </g>
            </g>
            <g id="close" @click="closeModal()" style="cursor: pointer">
            <rect id="Rectangle 89" x="726" y="84" width="20" height="20" fill="#C4C4C4" fill-opacity="0.01"/>
            <path id="Vector_64" d="M742.587 99.5996L737.488 94.5L742.587 89.4004C743.138 88.8499 743.138 87.9635 742.587 87.4129C742.037 86.8624 741.15 86.8624 740.6 87.4129L735.5 92.5125L730.4 87.4129C729.85 86.8624 728.963 86.8624 728.413 87.4129C727.862 87.9635 727.862 88.8499 728.413 89.4004L733.512 94.5L728.413 99.5996C727.862 100.15 727.862 101.037 728.413 101.587C728.963 102.138 729.85 102.138 730.4 101.587L735.5 96.4875L740.6 101.587C741.15 102.138 742.037 102.138 742.587 101.587C743.134 101.037 743.134 100.146 742.587 99.5996Z" fill="#FBC115"/>
            </g>
            <g id="show all" style="filter: grayscale(1); opacity: 0.7; cursor: not-allowed">
            <text id="all" fill="#FBC115" xml:space="preserve" style="white-space: pre" font-family="Anson" font-size="18" letter-spacing="0em"><tspan x="48.4863" y="99.736">ALL</tspan></text>
            <rect id="Rectangle 90_2" x="25" y="89" width="15" height="15" fill="#C4C4C4" fill-opacity="0.01"/>
            <rect id="Rectangle 7" x="25.25" y="89.25" width="14.5" height="14.5" stroke="#FBC115" stroke-width="0.5"/>
            </g>
            <g v-if="Object.keys($store.getters.rewards).length === 0" id="empty">
                <text id="add text here" fill="#363636" xml:space="preserve" style="white-space: pre" font-family="Anson" font-size="26" letter-spacing="0em"><tspan x="370" y="334.452">NO REWARDS</tspan></text>
                <g id="Frame" clip-path="url(#clip0_509_3433)">
                <path id="Vector_65" d="M435.85 271.67H418.81V276.46H435.85V271.67Z" fill="#363636"/>
                <path id="Vector_66" d="M473.39 226.23H475.72L475.43 224.93L483.43 219.81L480.21 214.75L370 284.88L373.22 289.94L378.34 286.67V293.59C378.338 294.405 378.658 295.189 379.23 295.77C379.803 296.343 380.579 296.667 381.39 296.67H473.27C474.084 296.67 474.865 296.347 475.441 295.771C476.017 295.195 476.34 294.414 476.34 293.6V232.35H463.77L473.39 226.23ZM441.98 279.51C441.99 279.916 441.917 280.319 441.766 280.696C441.615 281.073 441.389 281.415 441.102 281.702C440.815 281.989 440.473 282.215 440.096 282.366C439.719 282.517 439.316 282.59 438.91 282.58H415.75C415.346 282.582 414.945 282.503 414.572 282.347C414.199 282.19 413.862 281.96 413.58 281.67C413.294 281.384 413.067 281.044 412.912 280.67C412.758 280.296 412.679 279.895 412.68 279.49V268.67C412.679 268.266 412.757 267.866 412.911 267.492C413.065 267.118 413.29 266.779 413.576 266.493C413.861 266.207 414.2 265.98 414.573 265.825C414.946 265.67 415.346 265.59 415.75 265.59H417.75V269.84H434.75V265.54H438.84C439.254 265.529 439.667 265.602 440.052 265.756C440.437 265.909 440.787 266.139 441.081 266.432C441.375 266.724 441.606 267.074 441.76 267.459C441.915 267.843 441.99 268.255 441.98 268.67V279.51ZM441.5 251.51C441.497 252.041 441.356 252.561 441.09 253.021C440.825 253.481 440.445 253.864 439.987 254.132C439.529 254.4 439.009 254.545 438.479 254.552C437.948 254.558 437.425 254.427 436.96 254.17L432.96 251.95L441.51 246.51L441.5 251.51Z" fill="#363636"/>
                <path id="Vector_67" d="M440.47 225.68V236.29L457.15 225.68H440.47Z" fill="#363636"/>
                <path id="Vector_68" d="M434.35 192H418.28V219.56H434.35V192Z" fill="#363636"/>
                <path id="Vector_69" d="M473.71 215.15L469.1 194.4C468.945 193.718 468.564 193.109 468.02 192.67C467.482 192.228 466.806 191.988 466.11 191.99H440.47V219.56H466.77L473.71 215.15Z" fill="#363636"/>
                <path id="Vector_70" d="M426.34 242.19L416.73 247.5C416.265 247.757 415.742 247.888 415.211 247.881C414.681 247.875 414.161 247.73 413.703 247.462C413.245 247.194 412.865 246.811 412.599 246.351C412.334 245.891 412.193 245.371 412.19 244.84V225.67H377.34V276.46L428.92 243.67L426.34 242.19Z" fill="#363636"/>
                <path id="Vector_71" d="M412.15 192H386.15C385.508 192.066 384.903 192.332 384.42 192.76C383.916 193.182 383.565 193.759 383.42 194.4L377.91 219.56H412.15V192Z" fill="#363636"/>
                <path id="Vector_72" d="M427.79 236.01L434.34 239.67V225.67H418.28V239.67L424.83 236.05C425.279 235.792 425.787 235.654 426.305 235.647C426.822 235.64 427.334 235.765 427.79 236.01Z" fill="#363636"/>
                </g>
            </g>
            <foreignObject v-else class="rewards-view" y="130" x="140" width="73%" height="55%" >
                <ResourceItem
                style="cursor: pointer"
                height="80" width="90" x="0" y="100"
                v-for="(quantity, rewardSymbol) in $store.getters.rewards" :key="rewardSymbol"
                :symbol="rewardSymbol" 
                :quantity="quantity"
                :disabled="false"
                :selected="selectedItems.includes(rewardSymbol)"
                @click="selectItem(rewardSymbol)"
                />
            </foreignObject>
            </g>
            <defs>
            <filter id="filter0_b_497_3286" x="97" y="67" width="665" height="420" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
            <feGaussianBlur in="BackgroundImage" stdDeviation="2.5"/>
            <feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_497_3286"/>
            <feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur_497_3286" result="shape"/>
            </filter>
            <linearGradient id="paint0_linear_497_3286" x1="429.5" y1="72" x2="429.5" y2="482" gradientUnits="userSpaceOnUse">
            <stop/>
            <stop offset="1" stop-color="#3A3E41" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint1_linear_497_3286" x1="429.5" y1="72" x2="429.5" y2="482" gradientUnits="userSpaceOnUse">
            <stop stop-color="#FBC115"/>
            <stop offset="1" stop-color="#4E4E4E" stop-opacity="0.12"/>
            </linearGradient>
            <linearGradient id="paint2_linear_497_3286" x1="657.5" y1="467" x2="657.5" y2="431" gradientUnits="userSpaceOnUse">
            <stop stop-color="#FBC115" stop-opacity="0"/>
            <stop offset="1" stop-color="#FBC115" stop-opacity="0.12"/>
            </linearGradient>
            <linearGradient id="paint3_linear_497_3286" x1="86" y1="136" x2="25.5" y2="135" gradientUnits="userSpaceOnUse">
            <stop stop-color="#FBC115"/>
            <stop offset="1" stop-color="#FBC115" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint4_linear_497_3286" x1="402.894" y1="49.1797" x2="402.894" y2="510" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#343434" stop-opacity="0.61"/>
            </linearGradient>
            <linearGradient id="paint5_linear_497_3286" x1="132.907" y1="62.5054" x2="132.907" y2="508.611" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#343434" stop-opacity="0.61"/>
            </linearGradient>
            <linearGradient id="paint6_linear_497_3286" x1="787.999" y1="430.078" x2="787.999" y2="442.411" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#616161" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint7_linear_497_3286" x1="787.999" y1="435.299" x2="787.999" y2="447.632" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#616161" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint8_linear_497_3286" x1="787.999" y1="440.521" x2="787.999" y2="452.854" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#616161" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint9_linear_497_3286" x1="787.999" y1="445.743" x2="787.999" y2="458.076" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#616161" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint10_linear_497_3286" x1="787.999" y1="450.964" x2="787.999" y2="463.297" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#616161" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint11_linear_497_3286" x1="787.999" y1="456.186" x2="787.999" y2="468.519" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#616161" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint12_linear_497_3286" x1="787.999" y1="461.408" x2="787.999" y2="473.741" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#616161" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint13_linear_497_3286" x1="787.999" y1="466.629" x2="787.999" y2="478.962" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#616161" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint14_linear_497_3286" x1="787.999" y1="471.851" x2="787.999" y2="484.184" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#616161" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint15_linear_497_3286" x1="787.999" y1="477.073" x2="787.999" y2="489.406" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#616161" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint16_linear_497_3286" x1="787.999" y1="482.294" x2="787.999" y2="494.627" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#616161" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint17_linear_497_3286" x1="773.628" y1="488.069" x2="773.628" y2="507.128" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#616161" stop-opacity="0"/>
            </linearGradient>
            <linearGradient id="paint18_linear_497_3286" x1="734" y1="44" x2="734" y2="142" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#121212"/>
            </linearGradient>
            <linearGradient id="paint19_linear_497_3286" x1="25.2555" y1="374.9" x2="25.2555" y2="484.388" gradientUnits="userSpaceOnUse">
            <stop stop-color="#616161"/>
            <stop offset="1" stop-color="#343434" stop-opacity="0.61"/>
            </linearGradient>
            </defs>
        </svg>
    </div>
</template>

<script>
import detectEthereumProvider from '@metamask/detect-provider'
import { ethers } from 'ethers'
import CONSTANTS from '../../constants'
import ResourceItem from '@/components/ResourceItem.vue'
import axios from 'axios'

export default {
    data () {
        return {
            selectedItems:[],
            mmloader: false,
        }
    },
    components: {
        ResourceItem
    },
    methods: {
        closeModal() {
            this.$emit('close')
            this.$emit('refreshRewards')
        },
        selectItem(symbol) {
            if(this.selectedItems.includes(symbol)) {
                this.selectedItems = this.selectedItems.filter(v => v !== symbol)
            } else {
                this.selectedItems.push(symbol)
            }
        },
        selectAll() {
            this.selectedItems = Object.keys(this.$store.getters.rewards)
        },
        unselectAll() {
            this.selectedItems = [];
        },
        async claim() {
            this.mmloader = true
            try {
                const selectedItems = [...this.selectedItems]
                const metamaskProvider = await detectEthereumProvider()
                if(metamaskProvider) {
                    const provider = new ethers.providers.Web3Provider(metamaskProvider, "any")
                    const signer = provider.getSigner()
                    const address = await signer.getAddress()
                    if(address !== this.$store.state.address) {
                        this.$buefy.snackbar.open({
                            duration: 5000,
                            message: 'Please switch your wallet address to your logged in address',
                            type: 'is-danger',
                            position: 'is-bottom',
                        })
                        this.mmloader = false
                        return;
                    }
                    let chainId = (await provider.getNetwork()).chainId
                    if(chainId !== CONSTANTS.chainId) {
                        await provider.provider.request({
                            method: "wallet_addEthereumChain",
                            params: [{
                                chainId: CONSTANTS.hexChainId,
                                rpcUrls: [CONSTANTS.rpcUrl],
                                chainName: CONSTANTS.chainName,
                                nativeCurrency: {
                                    name: "FTM",
                                    symbol: "FTM",
                                    decimals: 18
                                },
                                blockExplorerUrls: [CONSTANTS.chainExplorer]
                            }]
                        });
                        chainId = (await provider.getNetwork()).chainId
                        if(chainId !== CONSTANTS.chainId) {
                            this.$buefy.snackbar.open({
                                duration: 5000,
                                message: 'Failed to switch network. Please try again',
                                type: 'is-danger',
                                position: 'is-bottom',
                            })
                            this.mmloader = false
                            return;
                        }
                    }
                    // all check already passed, let's start claiming
                    const res = await axios.get('/api/tokens/claimOres', {
                        params:{
                            signature:this.$store.state.signature,
                            ores:JSON.stringify(selectedItems)
                        }
                    })
                    const signature = ethers.utils.splitSignature(res.data.signature)
                    const oreMinterContract = new ethers.Contract(CONSTANTS.economicPolicy.oreMinter, ["function mintOre(address[] _ores, uint[] _amounts, uint8 _v, bytes32 _r, bytes32 _s)"], signer);
                    const tx = await oreMinterContract.mintOre(
                        selectedItems.map(v => CONSTANTS.economicPolicy.assets[v].address),
                        selectedItems.map(v => ethers.utils.parseEther(this.$store.state.profile.rewards[v].toString())),
                        signature.v,
                        signature.r,
                        signature.s
                    )
                    await tx.wait()
                    this.closeModal()
                    this.$buefy.snackbar.open({
                        duration: 5000,
                        message: 'Rewards Claimed! Check your inventory.',
                        type: 'is-success', 
                        position: 'is-bottom'
                    })
                } else {
                    this.$buefy.snackbar.open({
                        duration: 5000,
                        message: 'Cannot connect wallet. Please use a web3 wallet in your browser',
                        type: 'is-danger',
                        position: 'is-bottom',
                    })
                }
            } finally {
                this.mmloader = false
            }
        },
    },
    created () {
        this.$store.dispatch('fetchProfile')
        this.$store.dispatch('refreshWithdrawnRewards')
        
    }
}
</script>


<style scoped>
.rewards-wrapper {
    width: 70vw;
    max-width: 900px;
    margin: 0 auto;
}
.rewards-view {
    overflow: unset;
}
</style>