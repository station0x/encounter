<template>
    <div class="section onboarding">
        <center>
            <div class="access-wrapper">
                <svg viewBox="0 0 877 499" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <g id="Group 369">
                    <g id="Group 296">
                    <g id="Group 295">
                    <g id="Group 367">
                    <g id="Mask Group">
                    <mask id="mask0_476_1289" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="28" y="77" width="820" height="419">
                    <path id="Vector" d="M718.161 77L702.894 92.2652H174.288L159.043 77H48.5454V90.6394L28 111.183V461.585L48.5454 482.128V495.768H158.79L173.57 480.988H701.691L716.725 496H827.455V482.128L848 461.585V111.183L827.455 90.6394V77H718.161Z" fill="#FF0000"/>
                    </mask>
                    <g mask="url(#mask0_476_1289)">
                    <g id="Mask Group_2">
                    <g id="illustration-rebel-base-underground-city-which-is-located-core-planet-black-gem-it-was-mine-blue-water-now-it-is-secret-camp-rebels-fantastic-style-scifi-topic 2">
                    <rect x="18" y="53" width="838" height="446" fill="url(#pattern0)"/>
                    <rect x="18" y="53" width="838" height="446" fill="url(#paint0_linear_476_1289)"/>
                    </g>
                    </g>
                    </g>
                    </g>
                    </g>
                    <g id="Group 292">
                    <path id="Vector_2" d="M28.2487 270.344V252.333V160.439H26.1359V254.45L17.5789 263.021V281.434L28.2487 270.746V270.344Z" fill="url(#paint1_linear_476_1289)"/>
                    <path id="Vector_3" d="M47.8137 75L26.136 96.7143V135.423H28.2488V111.36L48.8068 90.7672V77.1164H159.372L174.627 92.3968H703.535L717.882 78.0476L718.832 77.1164H828.193V90.7672L848.751 111.381V135.423H850.864V96.7143L829.186 75H47.8137ZM701.803 90.164H176.38L165.351 77.1164H712.832L701.803 90.164Z" fill="url(#paint2_linear_476_1289)"/>
                    <path id="Vector_4" d="M829.186 498.979L850.864 477.264V438.577H848.751V462.598L828.193 483.211V496.862H717.607L702.352 481.582H173.443L159.055 495.931L158.146 496.862H48.7644V483.211L28.2065 462.598V438.577H26.0936V477.264L47.7714 498.979H829.186ZM164.147 496.862L175.197 485.815H700.598L711.649 496.862H164.147Z" fill="url(#paint3_linear_476_1289)"/>
                    <path id="Vector_5" d="M28.2487 413.561V321.667V303.656V303.254L17.5789 292.566V310.979L26.1359 319.551V413.561H28.2487Z" fill="url(#paint4_linear_476_1289)"/>
                    <path id="Vector_6" d="M859.421 263.021L850.864 254.45V160.439H848.751V252.333V270.344V270.746L859.421 281.434V263.021Z" fill="url(#paint5_linear_476_1289)"/>
                    <path id="Vector_7" d="M859.421 310.979V292.566L848.751 303.254V303.656V321.667V413.561H850.864V319.551L859.421 310.979Z" fill="url(#paint6_linear_476_1289)"/>
                    <path id="Vector_8" d="M4.22569 224.312L17.3253 211.191L17.262 205.265L0 222.556V350.238L18.5085 368.778V362.81L4.22569 348.503V224.312Z" fill="url(#paint7_linear_476_1289)"/>
                    <path id="Vector_9" d="M859.675 211.19L872.774 224.312V348.503L858.492 362.809L858.449 368.841L877 350.238V222.556L859.696 205.222L859.675 211.19Z" fill="url(#paint8_linear_476_1289)"/>
                    </g>
                    <g id="Group 293">
                    <path id="Vector_10" d="M597 87H593V80H596.993L597 87Z" fill="#FBC115"/>
                    <path id="Vector_11" d="M603 87H600V80H602.995L603 87Z" fill="#FBC115" fill-opacity="0.9"/>
                    <path id="Vector_12" d="M610 87H606V80H609.993L610 87Z" fill="#FBC115" fill-opacity="0.8"/>
                    <path id="Vector_13" d="M616 87H613V80H615.995L616 87Z" fill="#FBC115" fill-opacity="0.7"/>
                    <path id="Vector_14" d="M623 87H619V80H622.993L623 87Z" fill="#FBC115" fill-opacity="0.6"/>
                    <path id="Vector_15" d="M629 87H626V80H628.995L629 87Z" fill="#FBC115" fill-opacity="0.5"/>
                    <path id="Vector_16" d="M636 87H632V80H635.993L636 87Z" fill="#FBC115" fill-opacity="0.4"/>
                    <path id="Vector_17" d="M642 87H639V80H641.995L642 87Z" fill="#FBC115" fill-opacity="0.3"/>
                    <path id="Vector_18" d="M649 87H645V80H648.993L649 87Z" fill="#FBC115" fill-opacity="0.2"/>
                    <path id="Vector_19" d="M655 87H652V80H654.995L655 87Z" fill="#FBC115" fill-opacity="0.1"/>
                    </g>
                    <g id="Group 294">
                    <path id="Vector_20" d="M281 80L285 80L285 87L281.007 87L281 80Z" fill="#FBC115"/>
                    <path id="Vector_21" d="M275 80L278 80L278 87L275.005 87L275 80Z" fill="#FBC115" fill-opacity="0.9"/>
                    <path id="Vector_22" d="M268 80L272 80L272 87L268.007 87L268 80Z" fill="#FBC115" fill-opacity="0.8"/>
                    <path id="Vector_23" d="M262 80L265 80L265 87L262.005 87L262 80Z" fill="#FBC115" fill-opacity="0.7"/>
                    <path id="Vector_24" d="M255 80L259 80L259 87L255.007 87L255 80Z" fill="#FBC115" fill-opacity="0.6"/>
                    <path id="Vector_25" d="M249 80L252 80L252 87L249.005 87L249 80Z" fill="#FBC115" fill-opacity="0.5"/>
                    <path id="Vector_26" d="M242 80L246 80L246 87L242.007 87L242 80Z" fill="#FBC115" fill-opacity="0.4"/>
                    <path id="Vector_27" d="M236 80L239 80L239 87L236.005 87L236 80Z" fill="#FBC115" fill-opacity="0.3"/>
                    <path id="Vector_28" d="M229 80L233 80L233 87L229.007 87L229 80Z" fill="#FBC115" fill-opacity="0.2"/>
                    <path id="Vector_29" d="M223 80L226 80L226 87L223.005 87L223 80Z" fill="#FBC115" fill-opacity="0.1"/>
                    </g>
                    </g>
                    <rect id="logo-1 1" x="298" width="282" height="126" fill="url(#pattern1)"/>
                    <rect id="soon 1" x="368" y="151.24" width="396" height="345" transform="rotate(-9.18924 368 151.24)" fill="url(#pattern2)"/>
                    </g>
                    <g id="Group 368">
                    <g id="Group 366">
                    <g id="Group 357">
                    <g id="Group 287">
                    <g id="Group 135">
                    <path id="Rectangle 5" d="M95.25 287.25L371.75 287.25L371.75 317.566L366.768 322.75L102.104 322.75L95.25 315.896L95.25 287.25Z" stroke="#FBC115" stroke-width="0.5"/>
                    </g>
                    <text @click="registerAddress()" id="redeem" fill="#FBC115" xml:space="preserve" style="white-space: pre; cursor: pointer" font-family="Anson" font-size="18" letter-spacing="0em"><tspan x="310.226" y="307.736">REDEEM</tspan></text>
                    </g>
                    <text id="You need access key" fill="#FBC115" xml:space="preserve" style="white-space: pre" font-family="Anson" font-size="26" letter-spacing="0em"><tspan x="95" y="185.148">You Need Access Key</tspan></text>
                    <g id="Game is now on alpha so we descied to lock access to limited people, you need to Use your access key to get access to the closed beta version">
                    <text fill="white" xml:space="preserve" style="white-space: pre" font-family="Roboto" font-size="13.5" letter-spacing="0em"><tspan x="104.742" y="217.655">he game is currently in closed alpha. </tspan><tspan x="96" y="233.655">You need an access key to play. </tspan></text>
                    <text fill="white" xml:space="preserve" style="white-space: pre" font-family="Roboto" font-size="13.5" letter-spacing="0em"><tspan x="96" y="217.655">T</tspan></text>
                    </g>
                    <g id="You can get access key from one of our markting channels">
                    <text fill="white" xml:space="preserve" style="white-space: pre" font-family="Roboto" font-size="11" letter-spacing="0em"><tspan x="102.727" y="370.655">ou can get an access key from our social media</tspan></text>
                    <text fill="white" xml:space="preserve" style="white-space: pre" font-family="Roboto" font-size="11" letter-spacing="0em"><tspan x="96" y="370.655">Y</tspan></text>
                    </g>
                    <foreignObject x="105" y="288" width="200" height="34">
                        <input
                            v-model="accessKey"
                            placeholder="Enter your access key!"
                            class="access-key-field"/>
                    </foreignObject>
                    <text id="Enter access key here" fill="white" fill-opacity="0.5" xml:space="preserve" style="white-space: pre" font-family="Roboto" font-size="13.5" letter-spacing="0em"><tspan c>Enter Access Key Here</tspan></text>
                    </g>
                    <g id="Telegram" @click="openLink('https://t.me/station0x')" style="cursor: pointer">
                    <path id="Vector_30" d="M138.297 386.274L123.96 391.971C123.688 392.079 123.678 392.466 123.945 392.589L127.114 394.044C127.2 394.084 127.265 394.158 127.293 394.249L128.653 398.629C128.722 398.85 128.986 398.936 129.169 398.797L131.536 396.992C131.649 396.906 131.803 396.902 131.921 396.982L135.89 399.692C136.088 399.828 136.358 399.713 136.402 399.475L138.744 386.647C138.792 386.388 138.539 386.178 138.297 386.274ZM129.609 394.666L129.182 397.126L128.078 393.603L135.647 388.848L129.609 394.666Z" fill="#FBC115"/>
                    </g>
                    <g id="Discord" @click="openLink('https://discord.gg/fySjpMSnx6')" style="cursor: pointer">
                    <path id="Vector_31" d="M162.149 389.322C160.311 387.962 158.55 388 158.55 388L158.37 388.204C160.555 388.852 161.571 389.805 161.571 389.805C158.445 388.103 154.462 388.115 151.211 389.805C151.211 389.805 152.265 388.801 154.578 388.153L154.45 388C154.45 388 152.702 387.962 150.851 389.322C150.851 389.322 149 392.614 149 396.669C149 396.669 150.08 398.499 152.92 398.588C152.92 398.588 153.396 398.029 153.782 397.546C152.149 397.063 151.532 396.059 151.532 396.059C152.558 396.693 153.595 397.091 154.887 397.343C156.99 397.771 159.605 397.331 161.558 396.059C161.558 396.059 160.915 397.088 159.232 397.559C159.617 398.029 160.08 398.576 160.08 398.576C162.92 398.487 164 396.656 164 396.669C164 392.614 162.149 389.322 162.149 389.322ZM154.103 395.487C153.383 395.487 152.792 394.864 152.792 394.089C152.844 392.232 155.374 392.238 155.414 394.089C155.414 394.864 154.835 395.487 154.103 395.487ZM158.794 395.487C158.074 395.487 157.483 394.864 157.483 394.089C157.541 392.236 160.04 392.235 160.105 394.089C160.105 394.864 159.527 395.487 158.794 395.487Z" fill="#FBC115"/>
                    </g>
                    <g @click="openLink('https://twitter.com/station0x')" style="cursor: pointer" id="Twitter">
                    <path id="Vector_31" d="M109.413 387.664C108.221 388.099 107.467 389.218 107.552 390.442L107.581 390.915L107.104 390.857C105.368 390.635 103.85 389.883 102.562 388.619L101.933 387.992L101.77 388.455C101.426 389.487 101.646 390.577 102.362 391.311C102.743 391.716 102.657 391.774 101.999 391.533C101.771 391.456 101.57 391.398 101.551 391.427C101.484 391.495 101.713 392.372 101.894 392.72C102.143 393.203 102.648 393.675 103.202 393.955L103.67 394.177L103.116 394.187C102.582 394.187 102.563 394.197 102.62 394.4C102.811 395.027 103.565 395.693 104.405 395.983L104.996 396.185L104.481 396.494C103.702 396.943 102.822 397.189 101.924 397.207C101.494 397.217 101.141 397.255 101.141 397.285C101.141 397.381 102.305 397.921 102.982 398.134C105.014 398.761 107.429 398.49 109.241 397.42C110.53 396.658 111.818 395.143 112.419 393.676C112.744 392.895 113.068 391.467 113.068 390.782C113.068 390.338 113.096 390.28 113.63 389.75C113.945 389.441 114.241 389.104 114.299 389.008C114.395 388.824 114.384 388.824 113.898 388.988C113.087 389.278 112.973 389.239 113.374 388.805C113.669 388.496 114.023 387.937 114.023 387.773C114.023 387.745 113.879 387.793 113.717 387.879C113.546 387.976 113.164 388.12 112.877 388.207L112.362 388.371L111.895 388.05C111.637 387.877 111.275 387.683 111.084 387.625C110.597 387.49 109.853 387.51 109.413 387.664V387.664Z" fill="#FBC115"/>
                    </g>
                    </g>
                    <text id="This game is in alpha version and may contain bugs" fill="#848484" xml:space="preserve" style="white-space: pre" font-family="Roboto" font-size="13.5" letter-spacing="0em"><tspan x="250" y="462.655">THIS GAME IS IN ALPHA VERSION AND MAY CONTAIN BUGS</tspan></text>
                    </g>
                    </g>
                    <defs>
                    <pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">
                    <use xlink:href="#image0_476_1289" transform="translate(-0.00014039) scale(0.000666854 0.00125297)"/>
                    </pattern>
                    <pattern id="pattern1" patternContentUnits="objectBoundingBox" width="1" height="1">
                    <use xlink:href="#image1_476_1289" transform="translate(0 -0.000139101) scale(0.000486855 0.00108963)"/>
                    </pattern>
                    <pattern id="pattern2" patternContentUnits="objectBoundingBox" width="1" height="1">
                    <use xlink:href="#image2_476_1289" transform="scale(0.00181159 0.002079)"/>
                    </pattern>
                    <linearGradient id="paint0_linear_476_1289" x1="27" y1="234.53" x2="844.5" y2="234.53" gradientUnits="userSpaceOnUse">
                    <stop/>
                    <stop offset="1" stop-opacity="0.85"/>
                    </linearGradient>
                    <linearGradient id="paint1_linear_476_1289" x1="22.9138" y1="160.439" x2="22.9138" y2="281.434" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#252525" stop-opacity="0.82"/>
                    <stop offset="1" stop-color="#494949"/>
                    </linearGradient>
                    <linearGradient id="paint2_linear_476_1289" x1="438.5" y1="75" x2="438.5" y2="135.423" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#252525" stop-opacity="0.82"/>
                    <stop offset="1" stop-color="#494949"/>
                    </linearGradient>
                    <linearGradient id="paint3_linear_476_1289" x1="438.479" y1="438.577" x2="438.479" y2="498.979" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#252525" stop-opacity="0.82"/>
                    <stop offset="1" stop-color="#494949"/>
                    </linearGradient>
                    <linearGradient id="paint4_linear_476_1289" x1="22.9138" y1="292.566" x2="22.9138" y2="413.561" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#252525" stop-opacity="0.82"/>
                    <stop offset="1" stop-color="#494949"/>
                    </linearGradient>
                    <linearGradient id="paint5_linear_476_1289" x1="854.086" y1="160.439" x2="854.086" y2="281.434" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#252525" stop-opacity="0.82"/>
                    <stop offset="1" stop-color="#494949"/>
                    </linearGradient>
                    <linearGradient id="paint6_linear_476_1289" x1="854.086" y1="292.566" x2="854.086" y2="413.561" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#252525" stop-opacity="0.82"/>
                    <stop offset="1" stop-color="#494949"/>
                    </linearGradient>
                    <linearGradient id="paint7_linear_476_1289" x1="9.25426" y1="205.265" x2="9.25426" y2="368.778" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#252525" stop-opacity="0.82"/>
                    <stop offset="1" stop-color="#494949"/>
                    </linearGradient>
                    <linearGradient id="paint8_linear_476_1289" x1="867.725" y1="205.222" x2="867.725" y2="368.841" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#252525" stop-opacity="0.82"/>
                    <stop offset="1" stop-color="#494949"/>
                    </linearGradient>
                    <image id="image0_476_1289" data-name="illustration-rebel-base-underground-city-which-is-located-core-planet-black-gem-it-was-mine-blue-water-now-it-is-secret-camp-rebels-fantastic-style-scifi-topic.jpg" width="1500" height="1020" href="https://res.cloudinary.com/station0x/image/upload/v1644948847/encouter/elements/Mask_Group_m5h0qe_bivdnc.webp"/>
                    <image id="image2_476_1289" data-name="soon-replace.png" width="552" height="481" href="https://res.cloudinary.com/station0x/image/upload/v1645096733/encouter/backgrounds/soon-replace_2_m0wrwl.webp"/>
                    </defs>
                </svg>
                <div v-if="loader" class="loading-box">
                    <b-button class="loader-fake-btn" :loading="true" ></b-button>
                    <h1 class="loading-text">Redeeming your key!</h1>
                </div>
            </div>
        </center>
    </div>
</template>


<script>
import GameGuide from '@/components/GameGuide.vue'
import axios from 'axios'
export default {
    data() {
        return {
            loader: false,
            accessKey: ''
        }
    },
    methods:{
        async registerAddress() {
            this.loader = true
            try {
                this.matchLoader = true
                let res = await axios.get("/api/access/registerAddress", {
                    params: {
                        signature: this.$store.state.signature,
                        key: this.accessKey
                    }
                })
                this.$store.commit('registerAddress', true)
                this.$buefy.toast.open({
                    duration: 5000,
                    message: `ACCESS GRANTED`,
                    position: 'is-bottom',
                    type: 'is-success'
                })
            } catch(err) {
                this.accessKey = ''
                this.$buefy.toast.open({
                    duration: 5000,
                    message: `Access key is not valid or may be expired`,
                    position: 'is-bottom',
                    type: 'is-danger'
                })
            } finally {
                this.loader = false
            }
        },
        openLink(link) {
            window.open(link, '_blank')
        }
    },
    watch: {
        '$store.state.matchState' () {
            if(this.$store.state.matchId) {
                this.matchLoader = false
                this.$router.push('/lobby')
            }
        }
    }
}
</script>

<style scoped>
.access-wrapper {
    max-width: 900px;
    margin-top: 15vh;
}
.access-key-field {
    border: none;
    box-shadow: none;
    height: 33px !important;
    background: black;
    padding: 3px;
    width: 100%;
}
</style>
